<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Ultimate Video Bot</title>
    <style>
        :root {
            --primary: #007bff;
            --success: #28a745;
            --video-color: #e83e8c;
            --bg-color: #f0f2f5;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg-color); margin: 0; padding: 20px; display: flex; justify-content: center; }
        .card { background: white; width: 100%; max-width: 650px; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; }
        
        h2 { color: #333; margin-bottom: 20px; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        
        /* Gender Selection Styles */
        .gender-selector { margin: 15px 0; padding: 10px; background: #f8f9fa; border-radius: 8px; display: flex; justify-content: center; gap: 20px; font-weight: bold; }
        .gender-selector input { width: auto; margin-right: 5px; cursor: pointer; }

        .btn-group { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 15px; }
        button { padding: 12px; cursor: pointer; border: none; border-radius: 8px; color: white; font-weight: bold; transition: 0.3s; font-size: 15px; }
        .btn-translate { background-color: var(--success); }
        .btn-ask { background-color: var(--primary); }
        .btn-video { background-color: var(--video-color); }
        button:hover { opacity: 0.85; transform: translateY(-2px); }
        button:disabled { background-color: #ccc; cursor: not-allowed; }

        /* Video Section */
        #video-wrapper { display: none; margin-top: 20px; background: #000; border-radius: 12px; overflow: hidden; border: 4px solid var(--video-color); position: relative; min-height: 200px; }
        video { width: 100%; display: block; background: #000; }

        /* Output Box for Large Text */
        .output-container { margin-top: 25px; text-align: left; }
        .output-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        #response-box { 
            background: #ffffff; padding: 15px; border-radius: 8px; border: 1px solid #eee;
            max-height: 350px; overflow-y: auto; white-space: pre-wrap; word-wrap: break-word;
            line-height: 1.6; color: #444; font-size: 16px; box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        .copy-btn { background: #6c757d; padding: 6px 15px; font-size: 13px; width: auto; }
        .status-msg { font-size: 14px; color: #666; margin-top: 10px; font-style: italic; }
    </style>
</head>
<body>

<div class="card">
    <h2>ü§ñ AI Ultimate Video Bot</h2>
    
    <input type="text" id="ngrokUrl" placeholder="Ngrok URL-‡Æê ‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æ™‡Øá‡Æ∏‡Øç‡Æü‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç (e.g. https://xxxx.ngrok-free.app)">
    
    <div class="gender-selector">
        <span>Avatar: </span>
        <label><input type="radio" name="gender" value="male" checked> Male üë®</label>
        <label><input type="radio" name="gender" value="female"> Female üë©</label>
    </div>

    <textarea id="userInput" rows="4" placeholder="‡ÆÜ‡Æô‡Øç‡Æï‡Æø‡Æ≤‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Æø‡Æ≤‡Øç ‡Æü‡Øà‡Æ™‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç..."></textarea>
    
    <div class="btn-group">
        <button class="btn-translate" id="tBtn" onclick="callApi('translate')">Translate</button>
        <button class="btn-ask" id="aBtn" onclick="callApi('ask')">Ask AI</button>
        <button class="btn-video" id="vBtn" onclick="callApi('ask_video')">Video Bot</button>
    </div>

    <p id="status" class="status-msg"></p>

    <div id="video-wrapper">
        <video id="aiVideo" playsinline>
            <source id="videoSource" src="" type="video/mp4">
            ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æø‡Æ∞‡Æµ‡ØÅ‡Æö‡Æ∞‡Øç ‡Æµ‡ØÄ‡Æü‡Æø‡ÆØ‡Øã‡Æµ‡Øà ‡ÆÜ‡Æ§‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.
        </video>
    </div>

    <div class="output-container">
        <div class="output-header">
            <strong>AI Response:</strong>
            <button class="copy-btn" onclick="copyText()">Copy Text</button>
        </div>
        <div id="response-box">Waiting for your request...</div>
    </div>
</div>



<script>
    async function callApi(mode) {
        const text = document.getElementById('userInput').value;
        const baseUrl = document.getElementById('ngrokUrl').value;
        const responseBox = document.getElementById('response-box');
        const status = document.getElementById('status');
        const videoWrapper = document.getElementById('video-wrapper');
        const videoPlayer = document.getElementById('aiVideo');
        
        // Get Selected Gender
        const gender = document.querySelector('input[name="gender"]:checked').value;

        if (!baseUrl || !text) {
            alert("URL ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ∞‡Øà‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç!");
            return;
        }

        // Reset UI
        responseBox.innerText = "AI ‡Æö‡Æø‡Æ®‡Øç‡Æ§‡Æø‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Øç ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...";
        status.innerText = mode === 'ask_video' ? "‡Æµ‡ØÄ‡Æü‡Æø‡ÆØ‡Øã ‡Æâ‡Æ∞‡ØÅ‡Æµ‡Ææ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ... (1 ‡Æ®‡Æø‡ÆÆ‡Æø‡Æü‡ÆÆ‡Øç ‡ÆÜ‡Æï‡Æ≤‡Ææ‡ÆÆ‡Øç)" : "‡Æ™‡Æ§‡Æø‡Æ≤‡Øç ‡Æ§‡ÆØ‡Ææ‡Æ∞‡Ææ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...";
        toggleButtons(true);
        videoWrapper.style.display = "none";

        const cleanUrl = baseUrl.endsWith('/') ? baseUrl.slice(0, -1) : baseUrl;

        try {
            const response = await fetch(`${cleanUrl}/${mode}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: text, gender: gender })
            });

            const data = await response.json();

            if (data.error) {
                responseBox.innerText = "Error: " + data.error;
                status.innerText = "‡Æ§‡Øã‡Æ≤‡Øç‡Æµ‡Æø!";
            } else {
                responseBox.innerText = data.result;

                if (mode === 'ask_video' && data.video_url) {
                    status.innerText = "‡Æµ‡ØÄ‡Æü‡Æø‡ÆØ‡Øã ‡Æ§‡ÆØ‡Ææ‡Æ∞‡Øç! ‡Æ™‡Æø‡Æ≥‡Øá ‡ÆÜ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...";
                    videoWrapper.style.display = "block";
                    
                    // ‡Æ™‡Æø‡Æ≥‡Ææ‡Æô‡Øç‡Æï‡Øç ‡Æµ‡Æø‡ÆØ‡ØÇ‡Æµ‡Øà‡Æ§‡Øç ‡Æ§‡Æµ‡Æø‡Æ∞‡Øç‡Æï‡Øç‡Æï ‡Æµ‡ØÄ‡Æü‡Æø‡ÆØ‡Øã‡Æµ‡Øà ‡ÆÆ‡ØÅ‡Æ±‡Øà‡ÆØ‡Ææ‡Æï ‡Æ∞‡ØÄ‡Æ≤‡Øã‡Æü‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡Æ≤‡Øç
                    videoPlayer.pause();
                    // URL-‡Æ≤‡Øç timestamp ‡Æö‡Øá‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æ§‡Æ©‡Øç ‡ÆÆ‡ØÇ‡Æ≤‡ÆÆ‡Øç Cache ‡Æ§‡Æµ‡Æø‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ
                    videoPlayer.src = data.video_url; 
                    videoPlayer.load();
                    
                    // ‡Æµ‡ØÄ‡Æü‡Æø‡ÆØ‡Øã ‡Æ≤‡Øã‡Æü‡Øç ‡ÆÜ‡Æ© ‡Æ™‡Æø‡Æ±‡Æï‡ØÅ ‡Æ™‡Æø‡Æ≥‡Øá ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡Æ≤‡Øç
                    videoPlayer.oncanplay = () => {
                        videoPlayer.play().catch(e => {
                            console.log("Autoplay blocked, showing controls.");
                            videoPlayer.controls = true;
                        });
                    };
                } else {
                    status.innerText = "‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø!";
                }
            }
        } catch (error) {
            responseBox.innerText = "‡Æï‡Æ©‡ØÜ‡Æï‡Øç‡Æ∑‡Æ©‡Øç ‡Æ§‡Øã‡Æ≤‡Øç‡Æµ‡Æø! Ngrok URL ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç Server-‡Æê‡Æö‡Øç ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.";
            status.innerText = "‡Æé‡Æ∞‡Æ∞‡Øç!";
        } finally {
            toggleButtons(false);
        }
    }

    function toggleButtons(state) {
        document.getElementById('tBtn').disabled = state;
        document.getElementById('aBtn').disabled = state;
        document.getElementById('vBtn').disabled = state;
    }

    function copyText() {
        const text = document.getElementById('response-box').innerText;
        navigator.clipboard.writeText(text).then(() => alert("Copied!"));
    }
</script>

</body>
</html>
